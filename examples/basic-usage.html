<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shared Component Builder - Basic Usage</title>
    <script src="../dist/component-builder.umd.js"></script>
</head>
<body>
    <h1>Shared Component Builder Demo</h1>
    
    <div id="app">
        <h2>Custom Banner Component</h2>
        <my-custom-banner message="Hello from the banner!" type="success" closable="true"></my-custom-banner>
        
        <h2>Counter Component</h2>
        <counter-component initial="5" step="2"></counter-component>
        
        <h2>Modal Component</h2>
        <button onclick="showModal()">Open Modal</button>
        <modal-component title="Example Modal" visible="false">
            <p>This is the modal content. You can put anything here!</p>
        </modal-component>
    </div>

    <script>
        // Initialize the component builder
        const builder = new ComponentBuilder();

        // Define a banner component
        builder.define('my-custom-banner', {
            version: '1.0.0',
            props: ['message', 'type', 'closable'],
            template: (props, state) => `
                <div class="banner banner--${props.type || 'info'}">
                    <span>${props.message}</span>
                    ${props.closable === 'true' ? '<button onclick="this.remove()">Ã—</button>' : ''}
                </div>
            `,
            styles: `
                .banner {
                    padding: 12px 16px;
                    border-radius: 4px;
                    margin: 8px 0;
                    font-family: Arial, sans-serif;
                }
                .banner--info { background: #e3f2fd; color: #1565c0; }
                .banner--success { background: #e8f5e8; color: #2e7d32; }
                .banner--error { background: #ffebee; color: #c62828; }
                .banner button {
                    float: right;
                    background: none;
                    border: none;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: bold;
                }
            `
        });

        // Define a counter component
        builder.define('counter-component', {
            props: ['initial', 'step'],
            template: (props, state) => `
                <div class="counter">
                    <span>Count: ${state.count}</span>
                    <button onclick="this.increment()">+</button>
                    <button onclick="this.decrement()">-</button>
                </div>
            `,
            styles: `
                .counter { 
                    display: flex; 
                    align-items: center; 
                    gap: 10px; 
                    font-family: Arial, sans-serif;
                    margin: 10px 0;
                }
                .counter button { 
                    padding: 5px 10px; 
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    cursor: pointer;
                }
                .counter button:hover {
                    background: #f0f0f0;
                }
            `,
            methods: {
                increment() {
                    this.setState({ count: this.state.count + parseInt(this.props.step || 1) });
                },
                decrement() {
                    this.setState({ count: this.state.count - parseInt(this.props.step || 1) });
                }
            },
            initialState: { count: 0 },
            mounted() {
                this.state.count = parseInt(this.props.initial || 0);
            }
        });

        // Define a modal component
        builder.define('modal-component', {
            props: ['title', 'visible'],
            template: (props, state) => `
                <div class="modal ${props.visible === 'true' ? 'visible' : ''}">
                    <div class="modal-content">
                        <h2>${props.title}</h2>
                        <slot></slot>
                        <button onclick="this.close()">Close</button>
                    </div>
                </div>
            `,
            styles: `
                .modal { 
                    display: none; 
                    position: fixed; 
                    top: 0; 
                    left: 0; 
                    width: 100%; 
                    height: 100%; 
                    background: rgba(0,0,0,0.5);
                    z-index: 1000;
                }
                .modal.visible { display: block; }
                .modal-content { 
                    background: white; 
                    padding: 20px; 
                    margin: 10% auto; 
                    max-width: 500px; 
                    border-radius: 8px;
                    font-family: Arial, sans-serif;
                }
                .modal-content button {
                    padding: 8px 16px;
                    background: #007bff;
                    color: white;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }
                .modal-content button:hover {
                    background: #0056b3;
                }
            `,
            methods: {
                close() {
                    this.dispatchEvent(new CustomEvent('modal-close'));
                    this.setAttribute('visible', 'false');
                }
            }
        });

        // Function to show modal
        function showModal() {
            const modal = document.querySelector('modal-component');
            modal.setAttribute('visible', 'true');
        }

        // Listen for modal close events
        document.addEventListener('modal-close', () => {
            console.log('Modal was closed!');
        });

        // Example of exporting a component
        async function exportExample() {
            try {
                const script = await builder.export('my-custom-banner', { type: 'script' });
                console.log('Generated script:', script);
                
                const json = await builder.export('my-custom-banner', { type: 'json' });
                console.log('Generated JSON:', json);
            } catch (error) {
                console.error('Export error:', error);
            }
        }

        // Export example (uncomment to test)
        // exportExample();
    </script>
</body>
</html> 